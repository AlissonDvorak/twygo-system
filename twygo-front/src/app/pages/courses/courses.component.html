<!-- courses.component.html -->
<div class="container">
  <h1>Courses</h1>
  <a href="#" class="browse-link">Browse all available courses</a>

  <div class="course-grid">
    <div class="course-card" *ngFor="let course of courses" (click)="redirectToCourse(course._id)">
      <!-- Exibe o vídeo se videoUrl estiver disponível, caso contrário, exibe a imagem -->
      <ng-container *ngIf="course.videoUrl; else imageFallback">
        <video
          #videoPlayer
          class="course-image"
          controls
          [src]="course.videoUrl"
          [poster]="course.imageUrl"
          (loadedmetadata)="setVideoToStart(videoPlayer)"
          (error)="onVideoError($event, course)"
        >
          Seu navegador não suporta a tag de vídeo.
        </video>
      </ng-container>
      <ng-template #imageFallback>
        <img [src]="course.imageUrl || 'https://placehold.co/300x200'" alt="{{ course.title }}" class="course-image" />
      </ng-template>
      <div class="course-info">
        <h3>{{ course.title }}</h3>
        <p class="description">{{ course.description }}</p>
        <div class="course-details">
          <span class="lessons"><i class="fas fa-book"></i> {{ course.lessons }} lessons</span>
          <span class="duration">{{ course.duration }} horas</span>
          <span>Valido: {{ course.end_date | date:'dd/MM/yy' }}</span>
        </div>
        
      </div>
    </div>
  </div>
</div>

